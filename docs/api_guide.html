

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>API Guide &mdash; spanserver 0.7.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Generating Documentation" href="docing.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> spanserver
          

          
          </a>

          
            
            
              <div class="version">
                0.7.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="testing.html">Testing Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="docing.html">Generating Documentation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">API Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#spanapi">SpanAPI</a></li>
<li class="toctree-l2"><a class="reference internal" href="#spanroute">SpanRoute</a></li>
<li class="toctree-l2"><a class="reference internal" href="#request-and-response">Request and Response</a></li>
<li class="toctree-l2"><a class="reference internal" href="#options-enums">Options Enums</a></li>
<li class="toctree-l2"><a class="reference internal" href="#mimetype">MimeType</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id1">MimeType</a></li>
<li class="toctree-l2"><a class="reference internal" href="#models">Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="#documentation-tools">Documentation Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="#typing-aliases">Typing Aliases</a></li>
<li class="toctree-l2"><a class="reference internal" href="#api-errors">API Errors</a></li>
<li class="toctree-l2"><a class="reference internal" href="#testing-utilities">Testing Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="#testing-errors">Testing Errors</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">spanserver</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>API Guide</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/api_guide.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <span class="target" id="module-spanserver"></span><div class="section" id="api-guide">
<h1>API Guide<a class="headerlink" href="#api-guide" title="Permalink to this headline">¶</a></h1>
<div class="section" id="spanapi">
<h2>SpanAPI<a class="headerlink" href="#spanapi" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="spanserver.SpanAPI">
<em class="property">class </em><code class="sig-name descname">SpanAPI</code><span class="sig-paren">(</span><em class="sig-param">debug=False</em>, <em class="sig-param">title=None</em>, <em class="sig-param">description=None</em>, <em class="sig-param">version=None</em>, <em class="sig-param">auto_escape=True</em>, <em class="sig-param">openapi=None</em>, <em class="sig-param">docs_route=None</em>, <em class="sig-param">allowed_hosts=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spanserver/_api.html#SpanAPI"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spanserver.SpanAPI" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">responder.API</span></code> extension for data-driven micro-services</p>
<p>The <code class="docutils literal notranslate"><span class="pre">is_test</span></code> param is added to <code class="xref py py-func docutils literal notranslate"><span class="pre">SpanAPI.__init__()</span></code>, and can be accessed
through <code class="docutils literal notranslate"><span class="pre">SpanAPI.IS_TEST</span></code> for flagging that an API is being run as a test.</p>
<dl class="method">
<dt id="spanserver.SpanAPI.add_route">
<code class="sig-name descname">add_route</code><span class="sig-paren">(</span><em class="sig-param">route</em>, <em class="sig-param">endpoint</em>, <em class="sig-param">*</em>, <em class="sig-param">default=False</em>, <em class="sig-param">static=False</em>, <em class="sig-param">check_existing=True</em>, <em class="sig-param">websocket=False</em>, <em class="sig-param">before_request=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spanserver/_api.html#SpanAPI.add_route"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spanserver.SpanAPI.add_route" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a route to the API.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>route</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – A string representation of the route.</p></li>
<li><p><strong>endpoint</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>) – The endpoint for the route – can be a callable, or a class.</p></li>
<li><p><strong>default</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, all unknown requests will route to this view.</p></li>
<li><p><strong>static</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, and no endpoint was passed, render “static/index.html”, and it will become a default route.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="spanserver.SpanAPI.openapi_save">
<code class="sig-name descname">openapi_save</code><span class="sig-paren">(</span><em class="sig-param">path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spanserver/_api.html#SpanAPI.openapi_save"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spanserver.SpanAPI.openapi_save" title="Permalink to this definition">¶</a></dt>
<dd><p>Save openapi.yaml file to <code class="docutils literal notranslate"><span class="pre">path</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="spanserver.SpanAPI.paged">
<em class="property">static </em><code class="sig-name descname">paged</code><span class="sig-paren">(</span><em class="sig-param">*</em>, <em class="sig-param">limit</em>, <em class="sig-param">default_offset=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spanserver/_api.html#SpanAPI.paged"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spanserver.SpanAPI.paged" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator to handle paging for <a class="reference internal" href="#spanserver.SpanRoute" title="spanserver.SpanRoute"><code class="xref py py-class docutils literal notranslate"><span class="pre">SpanRoute</span></code></a> method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>limit</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – max items a user can request</p>
</dd>
</dl>
<p>Assumes the possibility of <code class="docutils literal notranslate"><span class="pre">paging-offset</span></code> and <code class="docutils literal notranslate"><span class="pre">paging-limit</span></code> url params.
Passes <code class="xref py py-class docutils literal notranslate"><span class="pre">Paging</span></code> object into request and response <code class="docutils literal notranslate"><span class="pre">paging</span></code> attributes``.</p>
<p>Paging information, including urls for the next / previous page are added to the
response headers for all decorated routes.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">paging.total_items</span></code> must be set inside the route, all other paging
attributes will be automatically generated based on the total item count.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#spanserver.errors_api.APILimitError" title="spanserver.errors_api.APILimitError"><strong>APILimitError</strong></a> – If requested <code class="docutils literal notranslate"><span class="pre">paging-limit</span></code> url param is above
<code class="docutils literal notranslate"><span class="pre">limit</span></code>.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="spanserver.SpanAPI.redoc_save">
<code class="sig-name descname">redoc_save</code><span class="sig-paren">(</span><em class="sig-param">path_openapi</em>, <em class="sig-param">path_redoc</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spanserver/_api.html#SpanAPI.redoc_save"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spanserver.SpanAPI.redoc_save" title="Permalink to this definition">¶</a></dt>
<dd><p>Save openapi.yaml file to <code class="docutils literal notranslate"><span class="pre">path</span></code> then generate ReDoc bundled api at
<code class="docutils literal notranslate"><span class="pre">path_redoc</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="spanserver.SpanAPI.register_mimetype">
<code class="sig-name descname">register_mimetype</code><span class="sig-paren">(</span><em class="sig-param">mimetype</em>, <em class="sig-param">encoder</em>, <em class="sig-param">decoder</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spanserver/_api.html#SpanAPI.register_mimetype"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spanserver.SpanAPI.register_mimetype" title="Permalink to this definition">¶</a></dt>
<dd><p>Registers encoder and decoder function for a given mimetype.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mimetype</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">MimeType</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="docutils literal notranslate"><span class="pre">None</span></code>]) – to register for ex: <code class="docutils literal notranslate"><span class="pre">'text/csv'</span></code>.</p></li>
<li><p><strong>encoder</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code>]) – Encodes mimetype data to binary.</p></li>
<li><p><strong>decoder</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>]) – Decodes mimetype data to binary.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="spanserver.SpanAPI.use_schema">
<code class="sig-name descname">use_schema</code><span class="sig-paren">(</span><em class="sig-param">*</em>, <em class="sig-param">req=None</em>, <em class="sig-param">req_name=None</em>, <em class="sig-param">req_load=&lt;LoadOptions.VALIDATE_AND_LOAD: 1&gt;</em>, <em class="sig-param">resp=None</em>, <em class="sig-param">resp_name=None</em>, <em class="sig-param">resp_dump=&lt;DumpOptions.DUMP_ONLY: 1&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spanserver/_api.html#SpanAPI.use_schema"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spanserver.SpanAPI.use_schema" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator for <a class="reference internal" href="#spanserver.SpanRoute" title="spanserver.SpanRoute"><code class="xref py py-class docutils literal notranslate"><span class="pre">SpanRoute</span></code></a> methods to automatically validate incoming
request data based on a given model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>req</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Type</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Schema</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Schema</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">MimeType</span></code>, <code class="docutils literal notranslate"><span class="pre">None</span></code>]) – schema for request json data.</p></li>
<li><p><strong>req_name</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – name for request schema.</p></li>
<li><p><strong>req_load</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">LoadOptions</span></code>) – <p>loading options for req schema.</p>
<ul>
<li><p><strong>VALIDATE_AND_LOAD</strong>: Default. Loads and validates incoming data using
the schema’s <code class="docutils literal notranslate"><span class="pre">loads</span></code> method.</p></li>
<li><p><strong>VALIDATE_ONLY</strong>: Validates incoming data, but passes raw dict to
<code class="docutils literal notranslate"><span class="pre">data</span></code> param in route method.</p></li>
<li><p><strong>PASS_THROUGH</strong>: Passes json data into <code class="docutils literal notranslate"><span class="pre">data</span></code> param of route, but does
not validate or load it.</p></li>
<li><p><strong>IGNORE</strong>: Uses <code class="docutils literal notranslate"><span class="pre">req</span></code> schema for documentation, but does nothing with
incoming data at runtime – default responder behavior.</p></li>
</ul>
</p></li>
<li><p><strong>resp</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Type</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Schema</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Schema</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">MimeType</span></code>, <code class="docutils literal notranslate"><span class="pre">None</span></code>]) – schema for response json data.</p></li>
<li><p><strong>resp_name</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – name for response schema.</p></li>
<li><p><strong>resp_dump</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">DumpOptions</span></code>) – <p>loading options for req schema</p>
<ul>
<li><p><strong>DUMP_ONLY</strong>: Default. Dumps data using the schema’s <code class="docutils literal notranslate"><span class="pre">dump</span></code> method.
Only minimal validation is done during this process. See Marshmallow’s
documentation for details.</p></li>
<li><p><strong>VALIDATE_ONLY</strong>: Validates outgoing data but does not dump it.</p></li>
<li><p><strong>VALIDATE_AND_DUMP</strong>: Validates outdoing data, then dumps it.</p></li>
<li><p><strong>IGNORE</strong>: Uses <code class="docutils literal notranslate"><span class="pre">resp</span></code> schema for documentation, but does nothing with
outgoing data at runtime – default responder behavior.</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
<p>A <code class="docutils literal notranslate"><span class="pre">data</span></code> param can be added to the decorated method which data from
<code class="docutils literal notranslate"><span class="pre">req.media()</span></code> will be passed into based on the <code class="docutils literal notranslate"><span class="pre">req_load</span></code> option above.</p>
<p>Using <code class="docutils literal notranslate"><span class="pre">spanreed.flag.TEXT</span></code> as the response or request schema indicates that
data will be loaded or sent back from req.text rather than req.media, and
openapi documentation will be tweaked accordingly.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="spanroute">
<h2>SpanRoute<a class="headerlink" href="#spanroute" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="spanserver.SpanRoute">
<em class="property">class </em><code class="sig-name descname">SpanRoute</code><a class="reference internal" href="_modules/spanserver/_route.html#SpanRoute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spanserver.SpanRoute" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for class-view based routing with <a class="reference internal" href="#spanserver.SpanAPI" title="spanserver.SpanAPI"><code class="xref py py-class docutils literal notranslate"><span class="pre">SpanAPI</span></code></a> See responder’s
documentation for more information on class-based routing.</p>
</dd></dl>

</div>
<div class="section" id="request-and-response">
<h2>Request and Response<a class="headerlink" href="#request-and-response" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="spanserver.Request">
<em class="property">class </em><code class="sig-name descname">Request</code><span class="sig-paren">(</span><em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spanserver/_req_resp.html#Request"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spanserver.Request" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="spanserver.Request.media">
<em class="property">async </em><code class="sig-name descname">media</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spanserver/_req_resp.html#Request.media"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spanserver.Request.media" title="Permalink to this definition">¶</a></dt>
<dd><p>Replacement for request’s <code class="docutils literal notranslate"><span class="pre">Request.media()</span></code>. Can handle bson with no special
modification, and loads through schema when desired.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[~MediaType]</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="spanserver.Request.media_loaded">
<em class="property">async </em><code class="sig-name descname">media_loaded</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spanserver/_req_resp.html#Request.media_loaded"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spanserver.Request.media_loaded" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <a class="reference internal" href="#spanserver.Request.media" title="spanserver.Request.media"><code class="xref py py-func docutils literal notranslate"><span class="pre">Request.media()</span></code></a> data loaded through route schema.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[~LoadedType]</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="spanserver.Request.mimetype">
<em class="property">property </em><code class="sig-name descname">mimetype</code><a class="headerlink" href="#spanserver.Request.mimetype" title="Permalink to this definition">¶</a></dt>
<dd><p>Mimetype pulled from <code class="docutils literal notranslate"><span class="pre">'Content-Type'</span></code> request header.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">MimeType</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="spanserver.Request.paging">
<em class="property">property </em><code class="sig-name descname">paging</code><a class="headerlink" href="#spanserver.Request.paging" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns paging data pulled from url params.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">PagingReq</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="spanserver.Request.projection">
<em class="property">property </em><code class="sig-name descname">projection</code><a class="headerlink" href="#spanserver.Request.projection" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a str, int dict of which fields to project into the response. 1 means
send field, 0 means remove field.</p>
<p>Projection specification is passed via query params. A url with:
<code class="docutils literal notranslate"><span class="pre">'?project.id=1&amp;project.data1=1'</span></code> would return a payload with ONLY the
<code class="docutils literal notranslate"><span class="pre">id</span></code> and <code class="docutils literal notranslate"><span class="pre">data1</span></code> fields.</p>
<p><code class="docutils literal notranslate"><span class="pre">'?project.id=1&amp;project.data1=0'</span></code> would send back all fields except <code class="docutils literal notranslate"><span class="pre">data1</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="spanserver.Response">
<em class="property">class </em><code class="sig-name descname">Response</code><span class="sig-paren">(</span><em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spanserver/_req_resp.html#Response"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spanserver.Response" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="spanserver.Response.paging">
<em class="property">property </em><code class="sig-name descname">paging</code><a class="headerlink" href="#spanserver.Response.paging" title="Permalink to this definition">¶</a></dt>
<dd><p>Response paging information for response headers. Only <code class="docutils literal notranslate"><span class="pre">total_items</span></code> must be
set for all other fields to be included in response.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">PagingResp</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="options-enums">
<h2>Options Enums<a class="headerlink" href="#options-enums" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="spanserver.LoadOptions">
<em class="property">class </em><code class="sig-name descname">LoadOptions</code><a class="reference internal" href="_modules/spanserver/_schema_info.html#LoadOptions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spanserver.LoadOptions" title="Permalink to this definition">¶</a></dt>
<dd><p>An enumeration.</p>
</dd></dl>

<dl class="class">
<dt id="spanserver.DumpOptions">
<em class="property">class </em><code class="sig-name descname">DumpOptions</code><a class="reference internal" href="_modules/spanserver/_schema_info.html#DumpOptions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spanserver.DumpOptions" title="Permalink to this definition">¶</a></dt>
<dd><p>An enumeration.</p>
</dd></dl>

</div>
<div class="section" id="mimetype">
<h2>MimeType<a class="headerlink" href="#mimetype" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="id1">
<h2>MimeType<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="spanserver.MimeType">
<em class="property">class </em><code class="sig-name descname">MimeType</code><a class="reference internal" href="_modules/spantools/_mimetype.html#MimeType"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spanserver.MimeType" title="Permalink to this definition">¶</a></dt>
<dd><p>An enumeration.</p>
<p>Enum class for the default supported Content-Types / Mimetypes for decoding and
encoding.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Enum Attr</p></th>
<th class="head"><p>Text Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>JSON</p></td>
<td><p>application/json</p></td>
</tr>
<tr class="row-odd"><td><p>YAML</p></td>
<td><p>application/yaml</p></td>
</tr>
<tr class="row-even"><td><p>BSON</p></td>
<td><p>application/bson</p></td>
</tr>
<tr class="row-odd"><td><p>TEXT</p></td>
<td><p>text/plain</p></td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="spanserver.MimeType.is_mimetype">
<em class="property">classmethod </em><code class="sig-name descname">is_mimetype</code><span class="sig-paren">(</span><em class="sig-param">value</em>, <em class="sig-param">mimetype</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spantools/_mimetype.html#MimeType.is_mimetype"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spanserver.MimeType.is_mimetype" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if string or enum is equivalent to a given mimetype enum value.
Similar to <code class="docutils literal notranslate"><span class="pre">isinstance()</span></code> or <code class="docutils literal notranslate"><span class="pre">issubclass()</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>value</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">MimeType</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="docutils literal notranslate"><span class="pre">None</span></code>]) – to check</p></li>
<li><p><strong>mimetype</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">MimeType</span></code>) – to check against.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>True: is equivalent. False: is not Equivalent.</p>
</dd>
</dl>
<p>Does some cleaning (such as resolving case and removing ‘x-‘ from type).</p>
<p>For instance, all of the following will pass equivalence for <code class="docutils literal notranslate"><span class="pre">MimeType.YAML</span></code>:</p>
<blockquote>
<div><ul class="simple">
<li><p>‘application/yaml’</p></li>
<li><p>‘application/YAML’</p></li>
<li><p>‘application/x-yaml’</p></li>
<li><p>‘yaml’</p></li>
<li><p>‘x-yaml’</p></li>
</ul>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="spanserver.MimeType.from_name">
<em class="property">classmethod </em><code class="sig-name descname">from_name</code><span class="sig-paren">(</span><em class="sig-param">value</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spantools/_mimetype.html#MimeType.from_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spanserver.MimeType.from_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns enum for given name. Does some cleaning (such as resolving case and
removing ‘x-‘ from type.)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>value</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">MimeType</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="docutils literal notranslate"><span class="pre">None</span></code>]) – Value to convert to enum.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – No MimeType enum for value.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">MimeType</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="spanserver.MimeType.to_string">
<em class="property">classmethod </em><code class="sig-name descname">to_string</code><span class="sig-paren">(</span><em class="sig-param">value</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spantools/_mimetype.html#MimeType.to_string"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spanserver.MimeType.to_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Get string value for given enum or string mimetype.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>value</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">MimeType</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="docutils literal notranslate"><span class="pre">None</span></code>]) – Incoming value</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>String representation.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If mimetype is <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="spanserver.MimeType.add_to_headers">
<em class="property">static </em><code class="sig-name descname">add_to_headers</code><span class="sig-paren">(</span><em class="sig-param">headers</em>, <em class="sig-param">mimetype</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spantools/_mimetype.html#MimeType.add_to_headers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spanserver.MimeType.add_to_headers" title="Permalink to this definition">¶</a></dt>
<dd><p>Add ‘Content-Type’ header for mimetype.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>headers</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">MutableMapping</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – headers obj</p></li>
<li><p><strong>mimetype</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">MimeType</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="docutils literal notranslate"><span class="pre">None</span></code>]) – to add</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="spanserver.MimeType.from_headers">
<em class="property">classmethod </em><code class="sig-name descname">from_headers</code><span class="sig-paren">(</span><em class="sig-param">headers</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spantools/_mimetype.html#MimeType.from_headers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spanserver.MimeType.from_headers" title="Permalink to this definition">¶</a></dt>
<dd><p>Get mimetype from ‘Content-Type’ value of headers.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>headers</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Mapping</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – to fetch from.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">MimeType</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="docutils literal notranslate"><span class="pre">None</span></code>]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>mimetype.</p>
</dd>
</dl>
<p>If known mimetype, enum value will be returned. If ‘Content-Type’ is not in
headers, None is returned.</p>
</dd></dl>

</dd></dl>

<dl class="data">
<dt id="spanserver.MimeTypeTolerant">
<code class="sig-name descname">MimeTypeTolerant</code><a class="headerlink" href="#spanserver.MimeTypeTolerant" title="Permalink to this definition">¶</a></dt>
<dd><p>Typing alias for <code class="docutils literal notranslate"><span class="pre">Union[MimeType,</span> <span class="pre">str,</span> <span class="pre">None]</span></code>.</p>
</dd></dl>

</div>
<div class="section" id="models">
<h2>Models<a class="headerlink" href="#models" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="spanserver.PagingReq">
<em class="property">class </em><code class="sig-name descname">PagingReq</code><span class="sig-paren">(</span><em class="sig-param">offset: int</em>, <em class="sig-param">limit: int</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spantools/_models.html#PagingReq"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spanserver.PagingReq" title="Permalink to this definition">¶</a></dt>
<dd><p>Paging info for requests.</p>
<p>serialized url param example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;paging-limit&quot;</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
  <span class="s2">&quot;paging-offset&quot;</span><span class="p">:</span> <span class="mi">0</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="method">
<dt id="spanserver.PagingReq.from_params">
<em class="property">classmethod </em><code class="sig-name descname">from_params</code><span class="sig-paren">(</span><em class="sig-param">params</em>, <em class="sig-param">default_offset=None</em>, <em class="sig-param">default_limit=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spantools/_models.html#PagingReq.from_params"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spanserver.PagingReq.from_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates PagingReq object from mapping of request url params.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>params</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">MutableMapping</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – </p></li>
<li><p><strong>default_offset</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – offset to use if None is supplied</p></li>
<li><p><strong>default_limit</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – limit to use if None is supplied</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">PagingReq</span></code></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>KeyError</strong> – If offset or limit is not supplied and no default is given.</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="spanserver.PagingReq.limit">
<code class="sig-name descname">limit</code><em class="property">: int</em><em class="property"> = None</em><a class="headerlink" href="#spanserver.PagingReq.limit" title="Permalink to this definition">¶</a></dt>
<dd><p>Limit sent to params of request.</p>
</dd></dl>

<dl class="attribute">
<dt id="spanserver.PagingReq.offset">
<code class="sig-name descname">offset</code><em class="property">: int</em><em class="property"> = None</em><a class="headerlink" href="#spanserver.PagingReq.offset" title="Permalink to this definition">¶</a></dt>
<dd><p>Offset sent to params of request.</p>
</dd></dl>

<dl class="method">
<dt id="spanserver.PagingReq.to_params">
<code class="sig-name descname">to_params</code><span class="sig-paren">(</span><em class="sig-param">params</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spantools/_models.html#PagingReq.to_params"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spanserver.PagingReq.to_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds paging info to URL params for request.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>params</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">MutableMapping</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p>
</dd>
</dl>
<p>All values are converted to strings before being added.</p>
<p>All param names are prefixed with <code class="docutils literal notranslate"><span class="pre">&quot;paging-&quot;</span></code> and underscores are replaces
with hyphens.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="spanserver.PagingResp">
<em class="property">class </em><code class="sig-name descname">PagingResp</code><span class="sig-paren">(</span><em class="sig-param">offset: int, limit: int, total_items: Optional[int], current_page: int, previous: Optional[str], next: Optional[str], total_pages: Optional[int]</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spantools/_models.html#PagingResp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spanserver.PagingResp" title="Permalink to this definition">¶</a></dt>
<dd><p>Paging info for responses.</p>
<p>serialized header example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;paging-limit&quot;</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
   <span class="s2">&quot;paging-offset&quot;</span><span class="p">:</span> <span class="mi">150</span><span class="p">,</span>
   <span class="s2">&quot;paging-previous&quot;</span><span class="p">:</span> <span class="s2">&quot;https://www.api.com/items?limit=50&amp;offset=200&quot;</span><span class="p">,</span>
   <span class="s2">&quot;paging-next&quot;</span><span class="p">:</span> <span class="s2">&quot;https://www.api.com/items?limit=50&amp;offset=100&quot;</span><span class="p">,</span>
   <span class="s2">&quot;paging-total-items&quot;</span><span class="p">:</span> <span class="mi">234</span><span class="p">,</span>
   <span class="s2">&quot;paging-current-page&quot;</span><span class="p">:</span> <span class="mi">4</span>
   <span class="s2">&quot;paging-total-pages&quot;</span><span class="p">:</span> <span class="mi">5</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="spanserver.PagingResp.current_page">
<code class="sig-name descname">current_page</code><em class="property">: int</em><em class="property"> = None</em><a class="headerlink" href="#spanserver.PagingResp.current_page" title="Permalink to this definition">¶</a></dt>
<dd><p>Current page index (starting at one).</p>
</dd></dl>

<dl class="method">
<dt id="spanserver.PagingResp.from_headers">
<em class="property">classmethod </em><code class="sig-name descname">from_headers</code><span class="sig-paren">(</span><em class="sig-param">headers</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spantools/_models.html#PagingResp.from_headers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spanserver.PagingResp.from_headers" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates PagingResp object from mapping of response headers.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>headers</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Mapping</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">PagingResp</span></code></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="spanserver.PagingResp.next">
<code class="sig-name descname">next</code><em class="property">: Optional[str]</em><em class="property"> = None</em><a class="headerlink" href="#spanserver.PagingResp.next" title="Permalink to this definition">¶</a></dt>
<dd><p>Next page url</p>
</dd></dl>

<dl class="attribute">
<dt id="spanserver.PagingResp.previous">
<code class="sig-name descname">previous</code><em class="property">: Optional[str]</em><em class="property"> = None</em><a class="headerlink" href="#spanserver.PagingResp.previous" title="Permalink to this definition">¶</a></dt>
<dd><p>Previous page url.</p>
</dd></dl>

<dl class="method">
<dt id="spanserver.PagingResp.to_headers">
<code class="sig-name descname">to_headers</code><span class="sig-paren">(</span><em class="sig-param">headers</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spantools/_models.html#PagingResp.to_headers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spanserver.PagingResp.to_headers" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds paging info to request headers in-place.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>headers</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">MutableMapping</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p>
</dd>
</dl>
<p>All values are converted to strings before being added. Optional fields whose
values are None are skipped.</p>
<p>All header keys are prefixed with <code class="docutils literal notranslate"><span class="pre">&quot;paging-&quot;</span></code> and underscores are replaces
with hyphens.</p>
</dd></dl>

<dl class="attribute">
<dt id="spanserver.PagingResp.total_items">
<code class="sig-name descname">total_items</code><em class="property">: Optional[int]</em><em class="property"> = None</em><a class="headerlink" href="#spanserver.PagingResp.total_items" title="Permalink to this definition">¶</a></dt>
<dd><p>Total number of returnable items.</p>
</dd></dl>

<dl class="attribute">
<dt id="spanserver.PagingResp.total_pages">
<code class="sig-name descname">total_pages</code><em class="property">: Optional[int]</em><em class="property"> = None</em><a class="headerlink" href="#spanserver.PagingResp.total_pages" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of total pages.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="spanserver.Error">
<em class="property">class </em><code class="sig-name descname">Error</code><span class="sig-paren">(</span><em class="sig-param">name: str</em>, <em class="sig-param">message: str</em>, <em class="sig-param">code: int</em>, <em class="sig-param">data: Optional[dict] = None</em>, <em class="sig-param">id: uuid.UUID = &lt;factory&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spantools/_models.html#Error"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spanserver.Error" title="Permalink to this definition">¶</a></dt>
<dd><p>Model for error information.</p>
<p>serialized example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;content-type&quot;</span><span class="p">:</span> <span class="s2">&quot;application/json&quot;</span><span class="p">,</span>
    <span class="s2">&quot;error-name&quot;</span><span class="p">:</span> <span class="s2">&quot;RequestValidationError&quot;</span><span class="p">,</span>
    <span class="s2">&quot;error-message&quot;</span><span class="p">:</span> <span class="s2">&quot;Request data does not match schema.&quot;</span><span class="p">,</span>
    <span class="s2">&quot;error-id&quot;</span><span class="p">:</span> <span class="s2">&quot;3a7b504b-19f0-473f-a3b0-3dfa5dd128ce&quot;</span><span class="p">,</span>
    <span class="s2">&quot;error-code&quot;</span><span class="p">:</span> <span class="s2">&quot;1003&quot;</span><span class="p">,</span>
    <span class="s2">&quot;error-data&quot;</span><span class="p">:</span> <span class="s2">&quot;{</span><span class="se">\&quot;</span><span class="s2">title</span><span class="se">\&quot;</span><span class="s2">: [</span><span class="se">\&quot;</span><span class="s2">Missing data for required field.</span><span class="se">\&quot;</span><span class="s2">]}&quot;</span><span class="p">,</span>
    <span class="s2">&quot;content-length&quot;</span><span class="p">:</span> <span class="s2">&quot;4&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="spanserver.Error.code">
<code class="sig-name descname">code</code><em class="property">: int</em><em class="property"> = None</em><a class="headerlink" href="#spanserver.Error.code" title="Permalink to this definition">¶</a></dt>
<dd><p>API error code. NOT the http code.</p>
</dd></dl>

<dl class="attribute">
<dt id="spanserver.Error.data">
<code class="sig-name descname">data</code><em class="property">: Optional[dict]</em><em class="property"> = None</em><a class="headerlink" href="#spanserver.Error.data" title="Permalink to this definition">¶</a></dt>
<dd><p>Arbitrary data dict with information about the error.</p>
<ul class="simple">
<li><p><strong>default:</strong> <code class="docutils literal notranslate"><span class="pre">None</span></code></p></li>
</ul>
</dd></dl>

<dl class="method">
<dt id="spanserver.Error.from_exception">
<em class="property">classmethod </em><code class="sig-name descname">from_exception</code><span class="sig-paren">(</span><em class="sig-param">exc</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spantools/_models.html#Error.from_exception"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spanserver.Error.from_exception" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates Error object from mapping of response headers, and handles generation
of <code class="xref py py-class docutils literal notranslate"><span class="pre">APIError</span></code> from Non-APIError exceptions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>exc</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">BaseException</span></code>) – Instance of an BaseException</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Error</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">APIError</span></code>]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p>
</dd>
</dl>
<p>If <code class="docutils literal notranslate"><span class="pre">exc</span></code> does not inherit from APIError, a general APIError will be generated
and returned alongside the Error dataclass.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">exc</span></code> does inherit from APIError, it will be passed through.</p>
</dd></dl>

<dl class="method">
<dt id="spanserver.Error.from_headers">
<em class="property">classmethod </em><code class="sig-name descname">from_headers</code><span class="sig-paren">(</span><em class="sig-param">headers</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spantools/_models.html#Error.from_headers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spanserver.Error.from_headers" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates Error object from mapping of response headers.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>headers</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Mapping</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Error</span></code></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="spanserver.Error.id">
<code class="sig-name descname">id</code><em class="property">: uuid.UUID</em><em class="property"> = None</em><a class="headerlink" href="#spanserver.Error.id" title="Permalink to this definition">¶</a></dt>
<dd><p>UUID for specific instance of raised error for bug fixing.</p>
<ul class="simple">
<li><p><strong>default factory:</strong> <code class="docutils literal notranslate"><span class="pre">uuid.uuid4</span></code></p></li>
</ul>
</dd></dl>

<dl class="attribute">
<dt id="spanserver.Error.message">
<code class="sig-name descname">message</code><em class="property">: str</em><em class="property"> = None</em><a class="headerlink" href="#spanserver.Error.message" title="Permalink to this definition">¶</a></dt>
<dd><p>Description of error.</p>
</dd></dl>

<dl class="attribute">
<dt id="spanserver.Error.name">
<code class="sig-name descname">name</code><em class="property">: str</em><em class="property"> = None</em><a class="headerlink" href="#spanserver.Error.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of error class.</p>
</dd></dl>

<dl class="method">
<dt id="spanserver.Error.to_exception">
<code class="sig-name descname">to_exception</code><span class="sig-paren">(</span><em class="sig-param">errors_additional=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spantools/_models.html#Error.to_exception"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spanserver.Error.to_exception" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate APIError object for given error information.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>errors_additional</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Type</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">APIError</span></code>]]]) – Additional custom APIError classes for possible raise.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">APIError</span></code></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>BaseException instance with message, .api_code, .error_data and
.error_id</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>InvalidErrorCodeError</strong> – when error class with correct api_code not
supplied.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="spanserver.Error.to_headers">
<code class="sig-name descname">to_headers</code><span class="sig-paren">(</span><em class="sig-param">headers</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spantools/_models.html#Error.to_headers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spanserver.Error.to_headers" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds error info to response headers in-place.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>headers</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">MutableMapping</span></code>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p>
</dd>
</dl>
<p>All values are converted to strings before being added. Optional fields whose
values are None are skipped.</p>
<p>All header keys are prefixed with <code class="docutils literal notranslate"><span class="pre">&quot;error-&quot;</span></code>.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="documentation-tools">
<h2>Documentation Tools<a class="headerlink" href="#documentation-tools" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="spanserver.DocInfo">
<em class="property">class </em><code class="sig-name descname">DocInfo</code><span class="sig-paren">(</span><em class="sig-param">req_example: Union[Any</em>, <em class="sig-param">NoneType] = None</em>, <em class="sig-param">req_params: List[spanserver._openapi.ParamInfo] = &lt;factory&gt;</em>, <em class="sig-param">responses: Dict[int</em>, <em class="sig-param">spanserver._openapi.DocRespInfo] = &lt;factory&gt;</em>, <em class="sig-param">tags: List[str] = &lt;factory&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spanserver/_openapi.html#DocInfo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spanserver.DocInfo" title="Permalink to this definition">¶</a></dt>
<dd><dl class="attribute">
<dt id="spanserver.DocInfo.req_example">
<code class="sig-name descname">req_example</code><em class="property">: Optional[Any]</em><em class="property"> = None</em><a class="headerlink" href="#spanserver.DocInfo.req_example" title="Permalink to this definition">¶</a></dt>
<dd><p>Example request body data.</p>
<ul class="simple">
<li><p><strong>default:</strong> <code class="docutils literal notranslate"><span class="pre">None</span></code></p></li>
</ul>
</dd></dl>

<dl class="attribute">
<dt id="spanserver.DocInfo.req_params">
<code class="sig-name descname">req_params</code><em class="property">: List[ParamInfo]</em><em class="property"> = None</em><a class="headerlink" href="#spanserver.DocInfo.req_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Request parameter details.</p>
<ul class="simple">
<li><p><strong>default factory:</strong> <code class="docutils literal notranslate"><span class="pre">builtins.list</span></code></p></li>
</ul>
</dd></dl>

<dl class="attribute">
<dt id="spanserver.DocInfo.responses">
<code class="sig-name descname">responses</code><em class="property">: Dict[int, DocRespInfo]</em><em class="property"> = None</em><a class="headerlink" href="#spanserver.DocInfo.responses" title="Permalink to this definition">¶</a></dt>
<dd><p>Response codes and details.</p>
<ul class="simple">
<li><p><strong>default factory:</strong> <code class="docutils literal notranslate"><span class="pre">builtins.dict</span></code></p></li>
</ul>
</dd></dl>

<dl class="attribute">
<dt id="spanserver.DocInfo.tags">
<code class="sig-name descname">tags</code><em class="property">: List[str]</em><em class="property"> = None</em><a class="headerlink" href="#spanserver.DocInfo.tags" title="Permalink to this definition">¶</a></dt>
<dd><p>Tags for this method.</p>
<ul class="simple">
<li><p><strong>default factory:</strong> <code class="docutils literal notranslate"><span class="pre">builtins.list</span></code></p></li>
</ul>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="spanserver.DocRespInfo">
<em class="property">class </em><code class="sig-name descname">DocRespInfo</code><span class="sig-paren">(</span><em class="sig-param">description: Optional[str] = None</em>, <em class="sig-param">example: Optional[Any] = None</em>, <em class="sig-param">params: List[spanserver._openapi.ParamInfo] = &lt;factory&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spanserver/_openapi.html#DocRespInfo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spanserver.DocRespInfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Documentation information about method responses.</p>
<dl class="attribute">
<dt id="spanserver.DocRespInfo.description">
<code class="sig-name descname">description</code><em class="property">: Optional[str]</em><em class="property"> = None</em><a class="headerlink" href="#spanserver.DocRespInfo.description" title="Permalink to this definition">¶</a></dt>
<dd><p>Description of the response code.</p>
<ul class="simple">
<li><p><strong>default:</strong> <code class="docutils literal notranslate"><span class="pre">None</span></code></p></li>
</ul>
</dd></dl>

<dl class="attribute">
<dt id="spanserver.DocRespInfo.example">
<code class="sig-name descname">example</code><em class="property">: Optional[Any]</em><em class="property"> = None</em><a class="headerlink" href="#spanserver.DocRespInfo.example" title="Permalink to this definition">¶</a></dt>
<dd><p>Example of response payload.</p>
<ul class="simple">
<li><p><strong>default:</strong> <code class="docutils literal notranslate"><span class="pre">None</span></code></p></li>
</ul>
</dd></dl>

<dl class="attribute">
<dt id="spanserver.DocRespInfo.params">
<code class="sig-name descname">params</code><em class="property">: List[ParamInfo]</em><em class="property"> = None</em><a class="headerlink" href="#spanserver.DocRespInfo.params" title="Permalink to this definition">¶</a></dt>
<dd><p>Response Headers Details.</p>
<ul class="simple">
<li><p><strong>default factory:</strong> <code class="docutils literal notranslate"><span class="pre">builtins.list</span></code></p></li>
</ul>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="spanserver.ParamInfo">
<em class="property">class </em><code class="sig-name descname">ParamInfo</code><span class="sig-paren">(</span><em class="sig-param">param_type: spanserver._openapi.ParamTypes, name: str, decode_types: Sequence[type], description: Optional[str] = None, required: bool = True, default: Optional[Any] = None, max: Optional[float] = None, min: Optional[float] = None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spanserver/_openapi.html#ParamInfo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spanserver.ParamInfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Parameter detail.</p>
<dl class="attribute">
<dt id="spanserver.ParamInfo.decode_types">
<code class="sig-name descname">decode_types</code><em class="property">: Sequence[type]</em><em class="property"> = None</em><a class="headerlink" href="#spanserver.ParamInfo.decode_types" title="Permalink to this definition">¶</a></dt>
<dd><p>Python types for decoding from string.</p>
</dd></dl>

<dl class="attribute">
<dt id="spanserver.ParamInfo.default">
<code class="sig-name descname">default</code><em class="property">: Optional[Any]</em><em class="property"> = None</em><a class="headerlink" href="#spanserver.ParamInfo.default" title="Permalink to this definition">¶</a></dt>
<dd><p>Default value used if the parameter is not passed.</p>
<ul class="simple">
<li><p><strong>default:</strong> <code class="docutils literal notranslate"><span class="pre">None</span></code></p></li>
</ul>
</dd></dl>

<dl class="attribute">
<dt id="spanserver.ParamInfo.description">
<code class="sig-name descname">description</code><em class="property">: Optional[str]</em><em class="property"> = None</em><a class="headerlink" href="#spanserver.ParamInfo.description" title="Permalink to this definition">¶</a></dt>
<dd><p>Description of parameter.</p>
<ul class="simple">
<li><p><strong>default:</strong> <code class="docutils literal notranslate"><span class="pre">None</span></code></p></li>
</ul>
</dd></dl>

<dl class="attribute">
<dt id="spanserver.ParamInfo.max">
<code class="sig-name descname">max</code><em class="property">: Optional[float]</em><em class="property"> = None</em><a class="headerlink" href="#spanserver.ParamInfo.max" title="Permalink to this definition">¶</a></dt>
<dd><p>Maximum allowed value of the parameter.</p>
<ul class="simple">
<li><p><strong>default:</strong> <code class="docutils literal notranslate"><span class="pre">None</span></code></p></li>
</ul>
</dd></dl>

<dl class="attribute">
<dt id="spanserver.ParamInfo.min">
<code class="sig-name descname">min</code><em class="property">: Optional[float]</em><em class="property"> = None</em><a class="headerlink" href="#spanserver.ParamInfo.min" title="Permalink to this definition">¶</a></dt>
<dd><p>Minimum allowed value of the parameter.</p>
<ul class="simple">
<li><p><strong>default:</strong> <code class="docutils literal notranslate"><span class="pre">None</span></code></p></li>
</ul>
</dd></dl>

<dl class="attribute">
<dt id="spanserver.ParamInfo.name">
<code class="sig-name descname">name</code><em class="property">: str</em><em class="property"> = None</em><a class="headerlink" href="#spanserver.ParamInfo.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of parameter.</p>
</dd></dl>

<dl class="attribute">
<dt id="spanserver.ParamInfo.param_type">
<code class="sig-name descname">param_type</code><em class="property">: ParamTypes</em><em class="property"> = None</em><a class="headerlink" href="#spanserver.ParamInfo.param_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Type of parameter.</p>
</dd></dl>

<dl class="attribute">
<dt id="spanserver.ParamInfo.required">
<code class="sig-name descname">required</code><em class="property">: bool</em><em class="property"> = True</em><a class="headerlink" href="#spanserver.ParamInfo.required" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether the parameter is required.</p>
<ul class="simple">
<li><p><strong>default:</strong> <code class="docutils literal notranslate"><span class="pre">True</span></code></p></li>
</ul>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="spanserver.ParamTypes">
<em class="property">class </em><code class="sig-name descname">ParamTypes</code><a class="reference internal" href="_modules/spanserver/_openapi.html#ParamTypes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spanserver.ParamTypes" title="Permalink to this definition">¶</a></dt>
<dd><p>An enumeration.</p>
</dd></dl>

</div>
<div class="section" id="typing-aliases">
<h2>Typing Aliases<a class="headerlink" href="#typing-aliases" title="Permalink to this headline">¶</a></h2>
<dl class="data">
<dt id="spanserver.RecordType">
<code class="sig-name descname">RecordType</code><em class="property"> = typing.Mapping[str, typing.Any]</em><a class="headerlink" href="#spanserver.RecordType" title="Permalink to this definition">¶</a></dt>
<dd><p>The central part of internal API.</p>
<p>This represents a generic version of type ‘origin’ with type arguments ‘params’.
There are two kind of these aliases: user defined and special. The special ones
are wrappers around builtin collections and ABCs in collections.abc. These must
have ‘name’ always set. If ‘inst’ is False, then the alias can’t be instantiated,
this is used by e.g. typing.List and typing.Dict.</p>
<p>Type alias to be used for Mapping-based objects in Req bodies.</p>
</dd></dl>

<span class="target" id="module-spanserver.errors_api"></span></div>
<div class="section" id="api-errors">
<h2>API Errors<a class="headerlink" href="#api-errors" title="Permalink to this headline">¶</a></h2>
<p>These errors will be automatically returned in response headers if raised within a
route method.</p>
<dl class="exception">
<dt id="spanserver.errors_api.APIError">
<em class="property">exception </em><code class="sig-name descname">APIError</code><span class="sig-paren">(</span><em class="sig-param">message</em>, <em class="sig-param">error_data=None</em>, <em class="sig-param">error_id=None</em>, <em class="sig-param">send_media=False</em><span class="sig-paren">)</span><a class="headerlink" href="#spanserver.errors_api.APIError" title="Permalink to this definition">¶</a></dt>
<dd><p>Base error returned by SpanAPI in http responses. Must have a unique code.</p>
<p><strong>http code:</strong> 501</p>
<p><strong>api code:</strong> 1000</p>
<p>Returned when any exception not inherited from APIError is raised from a SpanRoute
method.</p>
<dl class="simple">
<dt>Init Values / Attributes</dt><dd><ul class="simple">
<li><p><strong>message</strong>: <code class="docutils literal notranslate"><span class="pre">str</span></code>: error message passed back in response</p></li>
<li><p><strong>error_data</strong>: <code class="docutils literal notranslate"><span class="pre">Optional[dict]</span></code>: error data to be passed back in response</p></li>
<li><p><strong>send_data</strong>: <code class="docutils literal notranslate"><span class="pre">bool</span></code>: send regular response data as well as error. If
<code class="docutils literal notranslate"><span class="pre">False</span></code>: <code class="docutils literal notranslate"><span class="pre">'data'</span></code> object of response is set to <code class="docutils literal notranslate"><span class="pre">None</span></code></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="exception">
<dt id="spanserver.errors_api.InvalidMethodError">
<em class="property">exception </em><code class="sig-name descname">InvalidMethodError</code><span class="sig-paren">(</span><em class="sig-param">message</em>, <em class="sig-param">error_data=None</em>, <em class="sig-param">error_id=None</em>, <em class="sig-param">send_media=False</em><span class="sig-paren">)</span><a class="headerlink" href="#spanserver.errors_api.InvalidMethodError" title="Permalink to this definition">¶</a></dt>
<dd><p>Invalid method requested from endpoint</p>
<p><strong>http code:</strong> 405</p>
<p><strong>api code:</strong> 1001</p>
<p>Returned when <code class="xref py py-class docutils literal notranslate"><span class="pre">SpanRoute</span></code> does not support request method
(POST/DELETE/GET/etc.).</p>
</dd></dl>

<dl class="exception">
<dt id="spanserver.errors_api.NothingToReturnError">
<em class="property">exception </em><code class="sig-name descname">NothingToReturnError</code><span class="sig-paren">(</span><em class="sig-param">message</em>, <em class="sig-param">error_data=None</em>, <em class="sig-param">error_id=None</em>, <em class="sig-param">send_media=False</em><span class="sig-paren">)</span><a class="headerlink" href="#spanserver.errors_api.NothingToReturnError" title="Permalink to this definition">¶</a></dt>
<dd><p>No Data to Return</p>
<p><strong>http code:</strong> 400</p>
<p><strong>api code:</strong> 1002</p>
<p>Returned when response schema is specified but resp.media is None, an empty list, or
an empty dict.</p>
</dd></dl>

<dl class="exception">
<dt id="spanserver.errors_api.RequestValidationError">
<em class="property">exception </em><code class="sig-name descname">RequestValidationError</code><span class="sig-paren">(</span><em class="sig-param">message</em>, <em class="sig-param">error_data=None</em>, <em class="sig-param">error_id=None</em>, <em class="sig-param">send_media=False</em><span class="sig-paren">)</span><a class="headerlink" href="#spanserver.errors_api.RequestValidationError" title="Permalink to this definition">¶</a></dt>
<dd><p>Request Data Does not match schema</p>
<p><strong>http code:</strong> 400</p>
<p><strong>api code:</strong> 1003</p>
<p>Returned when request.media() does not match schema for model supplied by
<code class="xref py py-func docutils literal notranslate"><span class="pre">SpanAPI.use_model()</span></code></p>
</dd></dl>

<dl class="exception">
<dt id="spanserver.errors_api.APILimitError">
<em class="property">exception </em><code class="sig-name descname">APILimitError</code><span class="sig-paren">(</span><em class="sig-param">message</em>, <em class="sig-param">error_data=None</em>, <em class="sig-param">error_id=None</em>, <em class="sig-param">send_media=False</em><span class="sig-paren">)</span><a class="headerlink" href="#spanserver.errors_api.APILimitError" title="Permalink to this definition">¶</a></dt>
<dd><p>Too many items for batch request</p>
<p><strong>http code:</strong> 400</p>
<p><strong>api code:</strong> 1004</p>
<p>Request param exceeds limit</p>
</dd></dl>

<dl class="exception">
<dt id="spanserver.errors_api.ResponseValidationError">
<em class="property">exception </em><code class="sig-name descname">ResponseValidationError</code><span class="sig-paren">(</span><em class="sig-param">message</em>, <em class="sig-param">error_data=None</em>, <em class="sig-param">error_id=None</em>, <em class="sig-param">send_media=False</em><span class="sig-paren">)</span><a class="headerlink" href="#spanserver.errors_api.ResponseValidationError" title="Permalink to this definition">¶</a></dt>
<dd><p>Server encountered error while validating response.</p>
<p><strong>http code:</strong> 400</p>
<p><strong>api code:</strong> 1005</p>
<p>Returned when route method with <code class="xref py py-func docutils literal notranslate"><span class="pre">SpanAPI.use_schema()</span></code> has data that fails
validation.</p>
</dd></dl>

<span class="target" id="module-spanserver.test_utils"></span></div>
<div class="section" id="testing-utilities">
<h2>Testing Utilities<a class="headerlink" href="#testing-utilities" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="spanserver.test_utils.validate_error">
<code class="sig-name descname">validate_error</code><span class="sig-paren">(</span><em class="sig-param">response</em>, <em class="sig-param">error_type</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spanserver/test_utils/_api.html#validate_error"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spanserver.test_utils.validate_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Validates response contains correct error info, prints response and headers for
test logs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>response</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Response</span></code>) – from test client.</p></li>
<li><p><strong>error_type</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Type</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">APIError</span></code>]) – APIError class that returned error should correspond to.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="#spanserver.test_utils.NoErrorReturnedError" title="spanserver.test_utils.NoErrorReturnedError"><strong>NoErrorReturnedError</strong></a> – No error information in response headers.</p></li>
<li><p><a class="reference internal" href="#spanserver.test_utils.StatusMismatchError" title="spanserver.test_utils.StatusMismatchError"><strong>StatusMismatchError</strong></a> – Response http code does not match <code class="docutils literal notranslate"><span class="pre">error_type</span></code>.</p></li>
<li><p><a class="reference internal" href="#spanserver.test_utils.WrongExceptionError" title="spanserver.test_utils.WrongExceptionError"><strong>WrongExceptionError</strong></a> – Error data does not match <code class="docutils literal notranslate"><span class="pre">error_type</span></code>.</p></li>
</ul>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Error</span></code></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>error data model.</p>
</dd>
</dl>
<p>Response status code and data are printed to stdout for log capture.</p>
<p>All exceptions are inherited from <a class="reference internal" href="#spanserver.test_utils.ResponseValidationError" title="spanserver.test_utils.ResponseValidationError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResponseValidationError</span></code></a></p>
</dd></dl>

<dl class="function">
<dt id="spanserver.test_utils.validate_response">
<code class="sig-name descname">validate_response</code><span class="sig-paren">(</span><em class="sig-param">response</em>, <em class="sig-param">valid_status_codes=200</em>, <em class="sig-param">data_schema=None</em>, <em class="sig-param">text_value=None</em>, <em class="sig-param">expected_headers=None</em>, <em class="sig-param">expected_paging=None</em>, <em class="sig-param">paging_urls=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spanserver/test_utils/_api.html#validate_response"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spanserver.test_utils.validate_response" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate response object from test client. For use when writing tests.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>response</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Response</span></code>) – from test client.</p></li>
<li><p><strong>valid_status_codes</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, …]]) – Status code(s) expected.</p></li>
<li><p><strong>data_schema</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Schema</span></code>]) – used for loading data.</p></li>
<li><p><strong>text_value</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – if text return expected, the expected text value.</p></li>
<li><p><strong>expected_headers</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – dict of expected headers.</p></li>
<li><p><strong>expected_paging</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">PagingResp</span></code>]) – Paging object with expected values.</p></li>
<li><p><strong>paging_urls</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Whether to check the URLs of the paging object. Default is
<code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Loaded Data.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="#spanserver.test_utils.StatusMismatchError" title="spanserver.test_utils.StatusMismatchError"><strong>StatusMismatchError</strong></a> – Response http code does not match
<code class="docutils literal notranslate"><span class="pre">valid_status_codes</span></code>.</p></li>
<li><p><a class="reference internal" href="#spanserver.test_utils.TextValidationError" title="spanserver.test_utils.TextValidationError"><strong>TextValidationError</strong></a> – Response.text does not match <code class="docutils literal notranslate"><span class="pre">text_value</span></code>.</p></li>
<li><p><strong>DataLoadError</strong> – Content could not be loaded as dict / bson.</p></li>
<li><p><a class="reference internal" href="#spanserver.test_utils.DataValidationError" title="spanserver.test_utils.DataValidationError"><strong>DataValidationError</strong></a> – Loaded data does not match schema.</p></li>
<li><p><a class="reference internal" href="#spanserver.test_utils.HeadersMismatchError" title="spanserver.test_utils.HeadersMismatchError"><strong>HeadersMismatchError</strong></a> – Response header values missing / different from
<code class="docutils literal notranslate"><span class="pre">expected_headers</span></code>. Additional values are allowed. Only passed values are
checked.</p></li>
</ul>
</dd>
</dl>
<p>This function tests that:</p>
<blockquote>
<div><ul class="simple">
<li><p>Status code comes back as expected.</p></li>
<li><p>Data can be loaded by passed schema.</p></li>
<li><p>Header values match expected.</p></li>
<li><p>Text data matches expected value.</p></li>
</ul>
</div></blockquote>
<p>Response status code and data are printed to stdout for log capture.</p>
<p>All exceptions are inherited from <a class="reference internal" href="#spanserver.test_utils.ResponseValidationError" title="spanserver.test_utils.ResponseValidationError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResponseValidationError</span></code></a></p>
</dd></dl>

</div>
<div class="section" id="testing-errors">
<h2>Testing Errors<a class="headerlink" href="#testing-errors" title="Permalink to this headline">¶</a></h2>
<dl class="exception">
<dt id="spanserver.test_utils.ContentDecodeError">
<em class="property">exception </em><code class="sig-name descname">ContentDecodeError</code><a class="reference internal" href="_modules/spantools/_errors.html#ContentDecodeError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spanserver.test_utils.ContentDecodeError" title="Permalink to this definition">¶</a></dt>
<dd><p>Could not load data type.</p>
</dd></dl>

<dl class="exception">
<dt id="spanserver.test_utils.ContentEncodeError">
<em class="property">exception </em><code class="sig-name descname">ContentEncodeError</code><a class="reference internal" href="_modules/spantools/_errors.html#ContentEncodeError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spanserver.test_utils.ContentEncodeError" title="Permalink to this definition">¶</a></dt>
<dd><p>Could not load data type.</p>
</dd></dl>

<dl class="exception">
<dt id="spanserver.test_utils.NoErrorReturnedError">
<em class="property">exception </em><code class="sig-name descname">NoErrorReturnedError</code><a class="reference internal" href="_modules/spantools/_errors.html#NoErrorReturnedError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spanserver.test_utils.NoErrorReturnedError" title="Permalink to this definition">¶</a></dt>
<dd><p>No Error in Headers</p>
</dd></dl>

<dl class="exception">
<dt id="spanserver.test_utils.ResponseValidationError">
<em class="property">exception </em><code class="sig-name descname">ResponseValidationError</code><a class="reference internal" href="_modules/spanserver/test_utils/_errors.html#ResponseValidationError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spanserver.test_utils.ResponseValidationError" title="Permalink to this definition">¶</a></dt>
<dd><p>Base Error for Exceptions Thrown by mismatched Responses.</p>
</dd></dl>

<dl class="exception">
<dt id="spanserver.test_utils.StatusMismatchError">
<em class="property">exception </em><code class="sig-name descname">StatusMismatchError</code><a class="reference internal" href="_modules/spanserver/test_utils/_errors.html#StatusMismatchError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spanserver.test_utils.StatusMismatchError" title="Permalink to this definition">¶</a></dt>
<dd><p>Response status does not match expectations.</p>
</dd></dl>

<dl class="exception">
<dt id="spanserver.test_utils.WrongExceptionError">
<em class="property">exception </em><code class="sig-name descname">WrongExceptionError</code><a class="reference internal" href="_modules/spanserver/test_utils/_errors.html#WrongExceptionError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spanserver.test_utils.WrongExceptionError" title="Permalink to this definition">¶</a></dt>
<dd><p>Error in headers does not match expected exception.</p>
</dd></dl>

<dl class="exception">
<dt id="spanserver.test_utils.DataValidationError">
<em class="property">exception </em><code class="sig-name descname">DataValidationError</code><a class="reference internal" href="_modules/spanserver/test_utils/_errors.html#DataValidationError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spanserver.test_utils.DataValidationError" title="Permalink to this definition">¶</a></dt>
<dd><p>Response data does not match schema.</p>
</dd></dl>

<dl class="exception">
<dt id="spanserver.test_utils.DataTypeValidationError">
<em class="property">exception </em><code class="sig-name descname">DataTypeValidationError</code><a class="reference internal" href="_modules/spanserver/test_utils/_errors.html#DataTypeValidationError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spanserver.test_utils.DataTypeValidationError" title="Permalink to this definition">¶</a></dt>
<dd><p>Response data does not match schema.</p>
</dd></dl>

<dl class="exception">
<dt id="spanserver.test_utils.TextValidationError">
<em class="property">exception </em><code class="sig-name descname">TextValidationError</code><a class="reference internal" href="_modules/spanserver/test_utils/_errors.html#TextValidationError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spanserver.test_utils.TextValidationError" title="Permalink to this definition">¶</a></dt>
<dd><p>Response text does not match supplied value.</p>
</dd></dl>

<dl class="exception">
<dt id="spanserver.test_utils.HeadersMismatchError">
<em class="property">exception </em><code class="sig-name descname">HeadersMismatchError</code><a class="reference internal" href="_modules/spanserver/test_utils/_errors.html#HeadersMismatchError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spanserver.test_utils.HeadersMismatchError" title="Permalink to this definition">¶</a></dt>
<dd><p>Headers do not match expected values.</p>
</dd></dl>

<dl class="exception">
<dt id="spanserver.test_utils.ParamsMismatchError">
<em class="property">exception </em><code class="sig-name descname">ParamsMismatchError</code><a class="reference internal" href="_modules/spanserver/test_utils/_errors.html#ParamsMismatchError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spanserver.test_utils.ParamsMismatchError" title="Permalink to this definition">¶</a></dt>
<dd><p>Headers do not match expected values.</p>
</dd></dl>

<dl class="exception">
<dt id="spanserver.test_utils.PagingMismatchError">
<em class="property">exception </em><code class="sig-name descname">PagingMismatchError</code><a class="reference internal" href="_modules/spanserver/test_utils/_errors.html#PagingMismatchError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spanserver.test_utils.PagingMismatchError" title="Permalink to this definition">¶</a></dt>
<dd><p>Paging does not match expected values.</p>
</dd></dl>

<dl class="exception">
<dt id="spanserver.test_utils.URLMismatchError">
<em class="property">exception </em><code class="sig-name descname">URLMismatchError</code><a class="reference internal" href="_modules/spanserver/test_utils/_errors.html#URLMismatchError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spanserver.test_utils.URLMismatchError" title="Permalink to this definition">¶</a></dt>
<dd><p>Request URL does not match expected url.</p>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="docing.html" class="btn btn-neutral float-left" title="Generating Documentation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright &#39;2018, Illuscio&#39;

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>